id: "universal-validation-workflow"
name: "Universal Project Validation"
description: "Universal validation workflow for any codebase using Akao philosophy"
version: "1.0.0"

nodes:
  - id: "project-scanner"
    type: "file-scanner"
    description: "Scan entire project structure"
    enabled: true
    parameters:
      directory: "."
      pattern: "*"
      recursive: true
      exclude_patterns:
        - ".git/*"
        - "build/*"
        - "*.log"
        - "*.tmp"
    timeout: 10000
    retry_count: 2

  - id: "config-parser"
    type: "yaml-processor"
    description: "Parse project configuration files"
    enabled: true
    depends_on: ["project-scanner"]
    parameters:
      config_files:
        - "CLAUDE.md"
        - ".akao/config.yaml"
        - "Makefile"
      validate_schema: true
    timeout: 5000
    retry_count: 1

  - id: "universal-validator"
    type: "logic-executor"
    description: "Execute universal validation rules"
    enabled: true
    depends_on: ["project-scanner", "config-parser"]
    parameters:
      rules_directory: ".akao/rules/enabled/universal"
      validation_mode: "comprehensive"
      check_philosophy_compliance: true
      enforce_naming_conventions: true
    timeout: 20000
    retry_count: 1

  - id: "compliance-reporter"
    type: "reporter"
    description: "Generate comprehensive compliance report"
    enabled: true
    depends_on: ["universal-validator"]
    parameters:
      format: "html"
      output_file: "universal-validation-report.html"
      include_recommendations: true
      generate_summary: true
      detailed_analysis: true
    timeout: 5000
    retry_count: 0

connections:
  - from_node: "project-scanner"
    from_output: "files"
    to_node: "config-parser"
    to_input: "input_files"
    transform_expression: "filter(extension in ['.yaml', '.md', 'Makefile'])"

  - from_node: "project-scanner"
    from_output: "files"
    to_node: "universal-validator"
    to_input: "all_files"

  - from_node: "config-parser"
    from_output: "parsed_configs"
    to_node: "universal-validator"
    to_input: "project_config"

  - from_node: "universal-validator"
    from_output: "validation_results"
    to_node: "compliance-reporter"
    to_input: "report_data"

default_parameters:
  philosophy_enforcement: "strict"
  naming_convention_check: true
  architecture_validation: true
  metadata_validation: true

input_schema:
  project_root: "string"
  validation_depth: "string"
  enforcement_level: "string"

output_schema:
  overall_compliance: "boolean"
  compliance_score: "number"
  report_path: "string"
  violations_by_category: "object"
  recommendations_count: "integer"